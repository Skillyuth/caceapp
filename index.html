<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mobile Cake Shop</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #fdf3f3;
    }
    header {
      background: #e91e63;
      color: #fff;
      padding: 1rem;
      text-align: center;
      font-size: 1.6rem;
    }
    .container {
      padding: 1rem;
      max-width: 480px;
      margin: auto;
    }
    .cake-card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 1.5rem;
      padding: 1rem;
    }
    .cake-images {
      display: flex;
      overflow-x: auto;
      margin-bottom: 0.8rem;
      gap: 0.5rem;
    }
    .cake-images img {
      height: 100px;
      border-radius: 8px;
      flex-shrink: 0;
      width: 120px;
      object-fit: cover;
    }
    select,
    input,
    textarea,
    button {
      width: 100%;
      padding: 0.6rem;
      margin: 0.4rem 0;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
      box-sizing: border-box;
    }
    button {
      background: #e91e63;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #c7155a;
    }
    .cart-summary {
      background: white;
      padding: 1rem;
      border-radius: 10px;
      margin: 1.5rem 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    .total {
      font-weight: bold;
      font-size: 1.2rem;
      color: #333;
      text-align: right;
    }
    .reset-btn {
      background: #555;
      margin-top: 1rem;
    }
    /* Confirmation message styling */
    #confirmationMsg {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 8px;
      display: none;
      text-align: center;
    }
  </style>
</head>
<body>
  <header>ðŸŽ‚ Mobile Cake Shop</header>
  <div class="container">
    <div id="cake-list"></div>

    <div class="cart-summary">
      <h4>ðŸ›’ Your Cart</h4>
      <ul id="cart"></ul>
      <p class="total">Total: â‚¹<span id="total">0</span></p>
      <button type="button" class="reset-btn" onclick="resetCart()">Reset Cart</button>
    </div>

    <form
      id="orderForm"
      action="https://formsubmit.co/a995de801cdfc7487326f5756468f8ef"
      method="POST"
      onsubmit="return handleSubmit(event)"
    >
      <input type="hidden" name="Cart Items" id="cart-items-hidden" />
      <input type="hidden" name="Total Amount" id="total-hidden" />
      <input type="text" name="Name" placeholder="Your Name" required />
      <input type="tel" name="Phone" placeholder="Phone Number" required />
      <select name="Delivery Address" id="deliverySelect" required onchange="toggleCustomAddress()">
        <option value="Deepanshu Restaurant">Deepanshu Restaurant</option>
        <option value="Custom">Enter custom address below</option>
      </select>
      <textarea
        name="Custom Address"
        id="customAddress"
        placeholder="Write custom address if selected above"
        style="display:none;"
      ></textarea>
      <textarea name="Message on Cake" placeholder="Message on the cake (optional)"></textarea>
      <!-- Honeypot field to prevent spam -->
      <input type="text" name="_honey" style="display:none" />
      <input type="hidden" name="_captcha" value="false" />
      <button type="submit">Place Order</button>
    </form>

    <div id="confirmationMsg">âœ… Order Confirmed! Thank you for your order. We'll contact you soon via WhatsApp or phone.</div>
  </div>

  <script>
    const cakes = [
      {
        name: "Chocolate Truffle Cake",
        desc: "Rich chocolate layers with creamy frosting.",
        imgs: [
          "https://source.unsplash.com/600x400/?chocolate-cake",
          "https://source.unsplash.com/600x400/?truffle-cake",
          "https://source.unsplash.com/600x400/?cake"
        ],
      },
      {
        name: "Red Velvet Cake",
        desc: "Classic red velvet with soft cream cheese.",
        imgs: [
          "https://source.unsplash.com/600x400/?red-velvet-cake",
          "https://source.unsplash.com/600x400/?cake-red",
          "https://source.unsplash.com/600x400/?dessert"
        ],
      },
      {
        name: "Black Forest Cake",
        desc: "Chocolate sponge with cherries and cream.",
        imgs: [
          "https://source.unsplash.com/600x400/?black-forest-cake",
          "https://source.unsplash.com/600x400/?forest-cake",
          "https://source.unsplash.com/600x400/?whipped-cream-cake"
        ],
      },
      {
        name: "Butterscotch Cake",
        desc: "Soft sponge with caramel and butterscotch chips.",
        imgs: [
          "https://source.unsplash.com/600x400/?butterscotch-cake",
          "https://source.unsplash.com/600x400/?caramel-cake",
          "https://source.unsplash.com/600x400/?cake-butter"
        ],
      },
      {
        name: "Pineapple Cake",
        desc: "Juicy pineapple cream layered delight.",
        imgs: [
          "https://source.unsplash.com/600x400/?pineapple-cake",
          "https://source.unsplash.com/600x400/?fruit-cake",
          "https://source.unsplash.com/600x400/?yellow-cake"
        ],
      },
      {
        name: "Mango Cake",
        desc: "Seasonal mango freshness in every bite.",
        imgs: [
          "https://source.unsplash.com/600x400/?mango-cake",
          "https://source.unsplash.com/600x400/?fresh-cake",
          "https://source.unsplash.com/600x400/?mango-dessert"
        ],
      },
      {
        name: "Strawberry Cake",
        desc: "Sweet and creamy strawberry indulgence.",
        imgs: [
          "https://source.unsplash.com/600x400/?strawberry-cake",
          "https://source.unsplash.com/600x400/?pink-cake",
          "https://source.unsplash.com/600x400/?cake-love"
        ],
      },
      {
        name: "Coffee Cake",
        desc: "For the love of coffee and cocoa.",
        imgs: [
          "https://source.unsplash.com/600x400/?coffee-cake",
          "https://source.unsplash.com/600x400/?mocha-cake",
          "https://source.unsplash.com/600x400/?cake-brown"
        ],
      },
    ];

    let cart = [];

    function renderCakes() {
      const list = document.getElementById("cake-list");
      list.innerHTML = "";
      cakes.forEach((cake, i) => {
        const card = document.createElement("div");
        card.className = "cake-card";

        let imagesHTML = '<div class="cake-images">';
        cake.imgs.forEach((img) => {
          imagesHTML += `<img src="${img}" alt="Cake image" loading="lazy" />`;
        });
        imagesHTML += "</div>";

        card.innerHTML = `
          ${imagesHTML}
          <h3>${cake.name}</h3>
          <p>${cake.desc}</p>
          <select onchange="updatePrice(this.value, 'variant-${i}')" id="variant-${i}">
            <option value="">Select Variant</option>
            <option value="1lb-399">1 Pound - â‚¹399</option>
            <option value="2lb-699">2 Pound - â‚¹699</option>
            <option value="3lb-999">3 Pound - â‚¹999</option>
            <option value="4lb-1299">4 Pound - â‚¹1299</option>
          </select>
          <button type="button" onclick="addToCart('${cake.name}', 'variant-${i}')">Add to Cart</button>
        `;

        list.appendChild(card);
      });
    }

    function updatePrice(value, id) {
      const select = document.getElementById(id);
      select.dataset.price = value ? value.split("-")[1] : "0";
    }

    function addToCart(cake, selectId) {
      const select = document.getElementById(selectId);
      const value = select.value;
      if (!value) {
        alert("Please select a variant.");
        return;
      }
      const price = parseInt(value.split("-")[1]);
      const variantText = select.options[select.selectedIndex].text;
      cart.push({ item: `${cake} - ${variantText}`, price });
      renderCart();
    }

    function renderCart() {
      const cartEl = document.getElementById("cart");
      const totalEl = document.getElementById("total");
      const hiddenItems = document.getElementById("cart-items-hidden");
      const hiddenTotal = document.getElementById("total-hidden");

      cartEl.innerHTML = "";
      let total = 0;
      cart.forEach((c, i) => {
        const li = document.createElement("li");
        li.textContent = `${c.item} - â‚¹${c.price}`;
        cartEl.appendChild(li);
        total += c.price;
      });

      totalEl.textContent = total;
      hiddenTotal.value = total;
      hiddenItems.value = cart.map((c) => c.item + " - â‚¹" + c.price).join(", ");
    }

    function resetCart() {
      cart = [];
      renderCart();
    }

    // Show or hide custom address textarea based on dropdown
    function toggleCustomAddress() {
      const deliverySelect = document.getElementById("deliverySelect");
      const customAddress = document.getElementById("customAddress");
      if (deliverySelect.value === "Custom") {
        customAddress.style.display = "block";
        customAddress.required = true;
      } else {
        customAddress.style.display = "none";
        customAddress.required = false;
        customAddress.value = "";
      }
    }

    // Handle form submission, prevent submit if cart empty, show confirmation message
    function handleSubmit(event) {
      if (cart.length === 0) {
        alert("Your cart is empty! Please add at least one cake to place an order.");
        event.preventDefault();
        return false;
      }
      // Confirmation message show after successful submission - formsubmit redirects, so show message after submit won't work here
      // But to keep UX smooth, just allow submit here.
      return true;
    }

    window.onload = () => {
      renderCakes();
      renderCart();
    };
  </script>
</body>
</html>
